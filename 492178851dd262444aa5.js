import"../assets/scss/style.scss";document.addEventListener("DOMContentLoaded",()=>{try{let s,a={};function e(){return window.innerWidth<=768}function t(){e()?function(){if(!e())return;console.log("Initializing Swipers for mobile");const t={slidesPerView:"auto",spaceBetween:0,pagination:{el:".swiper-pagination",clickable:!0}};["cap_services","repair_container","prices_container"].forEach(e=>{if(document.querySelector("."+e)&&!a[e])try{a[e]=new Swiper("."+e,t),console.log(`Swiper initialized for ${e}`)}catch(t){console.error(`Error initializing Swiper for ${e}:`,t)}})}():(console.log("Destroying Swipers for desktop"),Object.keys(a).forEach(e=>{if(a[e]&&"function"==typeof a[e].destroy)try{a[e].destroy(!0,!0),console.log(`Swiper destroyed for ${e}`)}catch(t){console.error(`Error destroying Swiper for ${e}:`,t)}}),a={})}t(),console.log("Initial Swiper state:",e()?"mobile":"desktop"),window.addEventListener("resize",()=>{clearTimeout(s),s=setTimeout(t,100)});const d=document.getElementById("iconButton"),l=d.querySelector(".open_icon_text"),u=document.querySelector(".open_img"),p=document.querySelectorAll(".brands_services");let m=!1;function n(){p.forEach((e,t)=>{window.innerWidth>=1010?t>=8&&e.classList.add("hidden"):window.innerWidth>=766?t>=6&&e.classList.add("hidden"):t>=12&&e.classList.add("hidden")}),l.textContent="Показать всё",u.classList.remove("rotated")}function o(){const e=document.querySelector(".feedback_container"),t=document.querySelector(".call_container"),n=document.querySelector(".sidebar_container");e&&e.classList.remove("feedback_container--opened"),t&&t.classList.remove("call_container--opened"),n&&n.classList.remove("sidebar_container--opened"),document.removeEventListener("click",r)}function c(e){e&&(o(),e.classList.contains("feedback_container")?e.classList.add("feedback_container--opened"):e.classList.contains("call_container")?e.classList.add("call_container--opened"):e.classList.contains("sidebar_container")&&e.classList.add("sidebar_container--opened"),setTimeout(()=>{document.addEventListener("click",r)},0))}function r(e){const t=document.querySelector(".feedback_container"),n=document.querySelector(".call_container"),c=document.querySelector(".sidebar_container"),i=t&&t.classList.contains("feedback_container--opened"),s=n&&n.classList.contains("call_container--opened"),a=c&&c.classList.contains("sidebar_container--opened");if(!i&&!s&&!a)return void document.removeEventListener("click",r);const d=t&&t.contains(e.target),l=n&&n.contains(e.target),u=c&&c.contains(e.target),p=e.target.closest(".button--opened-chat")||e.target.closest(".button--opened-call")||e.target.closest(".burger");d||l||u||p||o()}function i(e){"Escape"===e.key&&o()}n(),d.addEventListener("click",()=>{m?n():(p.forEach(e=>e.classList.remove("hidden")),l.textContent="Скрыть",u.classList.add("rotated")),m=!m}),window.addEventListener("resize",()=>{m||n()}),document.addEventListener("click",function(e){e.target.closest(".button--opened-chat")&&(e.preventDefault(),e.stopPropagation(),c(document.querySelector(".feedback_container"))),e.target.closest(".button--opened-call")&&(e.preventDefault(),e.stopPropagation(),c(document.querySelector(".call_container"))),e.target.closest(".burger")&&(e.preventDefault(),e.stopPropagation(),window.innerWidth<1119&&c(document.querySelector(".sidebar_container"))),e.target.closest(".round_button--close-form")&&(e.stopPropagation(),o()),e.target.closest(".close_menu")&&(e.stopPropagation(),o())}),document.addEventListener("DOMContentLoaded",function(){const e=document.querySelector(".feedback_form"),t=document.querySelector(".call_form");e&&e.addEventListener("submit",function(e){e.preventDefault(),console.log("Форма обратной связи отправлена"),o()}),t&&t.addEventListener("submit",function(e){e.preventDefault(),console.log("Форма звонка отправлена"),o()});const n=document.querySelector(".call_form__phone-input");n&&n.addEventListener("input",function(e){this.value=this.value.replace(/[^\d]/g,"")}),document.addEventListener("keydown",i),document.querySelectorAll(".modal").forEach(e=>{e.addEventListener("click",function(e){e.stopPropagation()})}),function(){const e=document.querySelector(".sidebar");window.innerWidth>=1119?e.style.display="block":e.style.display="none"}(),window.addEventListener("resize",function(){const e=document.querySelector(".sidebar"),t=document.querySelector(".sidebar_container");window.innerWidth>=1119?(e.style.display="block",t.classList.contains("sidebar_container--opened")&&o()):t.classList.contains("sidebar_container--opened")||(e.style.display="none")}),console.log("Модальные окна инициализированы"),console.log("Найдено кнопок чата:",document.querySelectorAll(".button--opened-chat").length),console.log("Найдено кнопок звонка:",document.querySelectorAll(".button--opened-call").length),console.log("Найдено кнопок бургер:",document.querySelectorAll(".burger").length)})}catch(f){console.error("Error initializing components:",f)}});