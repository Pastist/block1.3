import"../assets/scss/style.scss";document.addEventListener("DOMContentLoaded",()=>{try{let a,d={};function e(){return window.innerWidth<=768}function t(){e()?function(){if(!e())return;console.log("Initializing Swipers for mobile");const t={slidesPerView:"auto",spaceBetween:0,pagination:{el:".swiper-pagination",clickable:!0}};["cap_services","repair_container","prices_container"].forEach(e=>{if(document.querySelector("."+e)&&!d[e])try{d[e]=new Swiper("."+e,t),console.log(`Swiper initialized for ${e}`)}catch(t){console.error(`Error initializing Swiper for ${e}:`,t)}})}():(console.log("Destroying Swipers for desktop"),Object.keys(d).forEach(e=>{if(d[e]&&"function"==typeof d[e].destroy)try{d[e].destroy(!0,!0),console.log(`Swiper destroyed for ${e}`)}catch(t){console.error(`Error destroying Swiper for ${e}:`,t)}}),d={})}t(),console.log("Initial Swiper state:",e()?"mobile":"desktop"),window.addEventListener("resize",()=>{clearTimeout(a),a=setTimeout(t,100)});const l=document.getElementById("iconButton"),u=l.querySelector(".open_icon_text"),p=document.querySelector(".open_img"),m=document.querySelectorAll(".brands_services");let f=!1;function n(){m.forEach((e,t)=>{window.innerWidth>=1010?t>=8?e.classList.add("hidden"):e.classList.remove("hidden"):window.innerWidth>=766?t>=6?e.classList.add("hidden"):e.classList.remove("hidden"):t>=12?e.classList.add("hidden"):e.classList.remove("hidden")})}function o(){n(),u.textContent="Показать всё",p.classList.remove("rotated"),f=!1}function c(){const e=document.querySelector(".feedback_container"),t=document.querySelector(".call_container"),n=document.querySelector(".sidebar_container");e&&e.classList.remove("feedback_container--opened"),t&&t.classList.remove("call_container--opened"),n&&n.classList.remove("sidebar_container--opened"),document.removeEventListener("click",i)}function r(e){e&&(c(),e.classList.contains("feedback_container")?e.classList.add("feedback_container--opened"):e.classList.contains("call_container")?e.classList.add("call_container--opened"):e.classList.contains("sidebar_container")&&e.classList.add("sidebar_container--opened"),setTimeout(()=>{document.addEventListener("click",i)},0))}function i(e){const t=document.querySelector(".feedback_container"),n=document.querySelector(".call_container"),o=document.querySelector(".sidebar_container"),r=t&&t.classList.contains("feedback_container--opened"),s=n&&n.classList.contains("call_container--opened"),a=o&&o.classList.contains("sidebar_container--opened");if(!r&&!s&&!a)return void document.removeEventListener("click",i);const d=t&&t.contains(e.target),l=n&&n.contains(e.target),u=o&&o.contains(e.target),p=e.target.closest(".button--opened-chat")||e.target.closest(".button--opened-call")||e.target.closest(".burger");d||l||u||p||c()}function s(e){"Escape"===e.key&&c()}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",o):o(),l.addEventListener("click",()=>{f?(n(),u.textContent="Показать всё",p.classList.remove("rotated")):(m.forEach(e=>e.classList.remove("hidden")),u.textContent="Скрыть",p.classList.add("rotated")),f=!f}),window.addEventListener("resize",function(){f||n()}),document.addEventListener("click",function(e){e.target.closest(".button--opened-chat")&&(e.preventDefault(),e.stopPropagation(),r(document.querySelector(".feedback_container"))),e.target.closest(".button--opened-call")&&(e.preventDefault(),e.stopPropagation(),r(document.querySelector(".call_container"))),e.target.closest(".burger")&&(e.preventDefault(),e.stopPropagation(),window.innerWidth<1119&&r(document.querySelector(".sidebar_container"))),e.target.closest(".round_button--close-form")&&(e.stopPropagation(),c()),e.target.closest(".close_menu")&&(e.stopPropagation(),c())}),document.addEventListener("DOMContentLoaded",function(){const e=document.querySelector(".feedback_form"),t=document.querySelector(".call_form");e&&e.addEventListener("submit",function(e){e.preventDefault(),console.log("Форма обратной связи отправлена"),c()}),t&&t.addEventListener("submit",function(e){e.preventDefault(),console.log("Форма звонка отправлена"),c()});const n=document.querySelector(".call_form__phone-input");n&&n.addEventListener("input",function(e){this.value=this.value.replace(/[^\d]/g,"")}),document.addEventListener("keydown",s),document.querySelectorAll(".modal").forEach(e=>{e.addEventListener("click",function(e){e.stopPropagation()})}),function(){const e=document.querySelector(".sidebar");window.innerWidth>=1119?e.style.display="block":e.style.display="none"}(),window.addEventListener("resize",function(){const e=document.querySelector(".sidebar"),t=document.querySelector(".sidebar_container");window.innerWidth>=1119?(e.style.display="block",t.classList.contains("sidebar_container--opened")&&c()):t.classList.contains("sidebar_container--opened")||(e.style.display="none")}),console.log("Модальные окна инициализированы"),console.log("Найдено кнопок чата:",document.querySelectorAll(".button--opened-chat").length),console.log("Найдено кнопок звонка:",document.querySelectorAll(".button--opened-call").length),console.log("Найдено кнопок бургер:",document.querySelectorAll(".burger").length)})}catch(y){console.error("Error initializing components:",y)}});