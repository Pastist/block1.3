(()=>{"use strict";document.addEventListener("DOMContentLoaded",()=>{try{let e,t={};function n(){return window.innerWidth<=768}function o(){if(!n())return;console.log("Initializing Swipers for mobile");const e={slidesPerView:"auto",spaceBetween:0,pagination:{el:".swiper-pagination",clickable:!0}};["cap_services","repair_container","prices_container"].forEach(n=>{if(document.querySelector("."+n)&&!t[n])try{t[n]=new Swiper("."+n,e),console.log(`Swiper initialized for ${n}`)}catch(e){console.error(`Error initializing Swiper for ${n}:`,e)}})}function c(){n()?o():(console.log("Destroying Swipers for desktop"),Object.keys(t).forEach(e=>{if(t[e]&&"function"==typeof t[e].destroy)try{t[e].destroy(!0,!0),console.log(`Swiper destroyed for ${e}`)}catch(t){console.error(`Error destroying Swiper for ${e}:`,t)}}),t={})}c(),console.log("Initial Swiper state:",n()?"mobile":"desktop"),window.addEventListener("resize",()=>{clearTimeout(e),e=setTimeout(c,100)});const r=document.getElementById("iconButton"),i=r.querySelector(".open_icon_text"),s=document.querySelector(".open_img"),a=document.querySelectorAll(".brands_services");let d=!1;function l(){a.forEach((e,t)=>{window.innerWidth>=1010?t>=8?e.classList.add("hidden"):e.classList.remove("hidden"):window.innerWidth>=766?t>=6?e.classList.add("hidden"):e.classList.remove("hidden"):t>=12?e.classList.add("hidden"):e.classList.remove("hidden")})}function u(){l(),i.textContent="Показать всё",s.classList.remove("rotated"),d=!1}function p(){const e=document.querySelector(".feedback_container"),t=document.querySelector(".call_container"),n=document.querySelector(".sidebar_container");e&&e.classList.remove("feedback_container--opened"),t&&t.classList.remove("call_container--opened"),n&&n.classList.remove("sidebar_container--opened"),document.removeEventListener("click",f)}function m(e){e&&(p(),e.classList.contains("feedback_container")?e.classList.add("feedback_container--opened"):e.classList.contains("call_container")?e.classList.add("call_container--opened"):e.classList.contains("sidebar_container")&&e.classList.add("sidebar_container--opened"),setTimeout(()=>{document.addEventListener("click",f)},0))}function f(e){const t=document.querySelector(".feedback_container"),n=document.querySelector(".call_container"),o=document.querySelector(".sidebar_container"),c=t&&t.classList.contains("feedback_container--opened"),r=n&&n.classList.contains("call_container--opened"),i=o&&o.classList.contains("sidebar_container--opened");if(!c&&!r&&!i)return void document.removeEventListener("click",f);const s=t&&t.contains(e.target),a=n&&n.contains(e.target),d=o&&o.contains(e.target),l=e.target.closest(".button--opened-chat")||e.target.closest(".button--opened-call")||e.target.closest(".burger");s||a||d||l||p()}function g(e){"Escape"===e.key&&p()}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",u):u(),r.addEventListener("click",()=>{d?(l(),i.textContent="Показать всё",s.classList.remove("rotated")):(a.forEach(e=>e.classList.remove("hidden")),i.textContent="Скрыть",s.classList.add("rotated")),d=!d}),window.addEventListener("resize",function(){d||l()}),document.addEventListener("click",function(e){e.target.closest(".button--opened-chat")&&(e.preventDefault(),e.stopPropagation(),m(document.querySelector(".feedback_container"))),e.target.closest(".button--opened-call")&&(e.preventDefault(),e.stopPropagation(),m(document.querySelector(".call_container"))),e.target.closest(".burger")&&(e.preventDefault(),e.stopPropagation(),window.innerWidth<1119&&m(document.querySelector(".sidebar_container"))),e.target.closest(".round_button--close-form")&&(e.stopPropagation(),p()),e.target.closest(".close_menu")&&(e.stopPropagation(),p())}),document.addEventListener("DOMContentLoaded",function(){const e=document.querySelector(".feedback_form"),t=document.querySelector(".call_form");e&&e.addEventListener("submit",function(e){e.preventDefault(),console.log("Форма обратной связи отправлена"),p()}),t&&t.addEventListener("submit",function(e){e.preventDefault(),console.log("Форма звонка отправлена"),p()});const n=document.querySelector(".call_form__phone-input");n&&n.addEventListener("input",function(e){this.value=this.value.replace(/[^\d]/g,"")}),document.addEventListener("keydown",g),document.querySelectorAll(".modal").forEach(e=>{e.addEventListener("click",function(e){e.stopPropagation()})}),function(){const e=document.querySelector(".sidebar");window.innerWidth>=1119?e.style.display="block":e.style.display="none"}(),window.addEventListener("resize",function(){const e=document.querySelector(".sidebar"),t=document.querySelector(".sidebar_container");window.innerWidth>=1119?(e.style.display="block",t.classList.contains("sidebar_container--opened")&&p()):t.classList.contains("sidebar_container--opened")||(e.style.display="none")}),console.log("Модальные окна инициализированы"),console.log("Найдено кнопок чата:",document.querySelectorAll(".button--opened-chat").length),console.log("Найдено кнопок звонка:",document.querySelectorAll(".button--opened-call").length),console.log("Найдено кнопок бургер:",document.querySelectorAll(".burger").length)})}catch(y){console.error("Error initializing components:",y)}})})();