(()=>{"use strict";document.addEventListener("DOMContentLoaded",()=>{try{let e,t={};function n(){return window.innerWidth<=768}function o(){if(!n())return;console.log("Initializing Swipers for mobile");const e={slidesPerView:"auto",spaceBetween:0,pagination:{el:".swiper-pagination",clickable:!0}};["cap_services","repair_container","prices_container"].forEach(n=>{if(document.querySelector("."+n)&&!t[n])try{t[n]=new Swiper("."+n,e),console.log(`Swiper initialized for ${n}`)}catch(e){console.error(`Error initializing Swiper for ${n}:`,e)}})}function i(){n()?o():(console.log("Destroying Swipers for desktop"),Object.keys(t).forEach(e=>{if(t[e]&&"function"==typeof t[e].destroy)try{t[e].destroy(!0,!0),console.log(`Swiper destroyed for ${e}`)}catch(t){console.error(`Error destroying Swiper for ${e}:`,t)}}),t={})}i(),console.log("Initial Swiper state:",n()?"mobile":"desktop"),window.addEventListener("resize",()=>{clearTimeout(e),e=setTimeout(i,100)});{const k=document.querySelector(".content_button"),E=document.querySelector(".text_second"),q=document.querySelector(".text_third"),x=document.querySelector(".read-more_text"),C=document.querySelector(".information-more_img");let z=!1;function D(){const e=window.innerWidth;e<768?(E.style.display=z?"block":"none",q.style.display="none",E.style.overflow="",E.style.webkitLineClamp="",E.style.webkitBoxOrient=""):e<1119?(E.style.display="-webkit-box",E.style.overflow=z?"visible":"hidden",E.style.webkitBoxOrient="vertical",q.style.display="none",E.style.webkitLineClamp=e>=1119?z?"unset":"1":z?"unset":"2"):(E.style.display="-webkit-box",E.style.overflow=z?"visible":"hidden",E.style.webkitBoxOrient="vertical",E.style.webkitLineClamp=z?"unset":"1",q.style.display=z?"block":"none"),x.textContent=z?"Скрыть":"Читать далее",C.style.transform=z?"rotate(180deg)":"rotate(0deg)"}k.addEventListener("click",()=>{z=!z,D()}),window.addEventListener("resize",()=>{z=!1,D()}),D()}const c=document.getElementById("iconButton"),r=document.getElementById("iconButtonRepair"),s=c.querySelector(".open_icon_text"),a=r?r.querySelector(".open_icon_text"):null,d=document.querySelector(".open_img"),l=document.querySelector(".open_img_repair"),u=document.querySelectorAll(".brands_services"),m=document.querySelectorAll(".repair_services");let p=!1,y=!1;function f(){u.forEach((e,t)=>{window.innerWidth>=1010?t>=8?e.classList.add("hidden"):e.classList.remove("hidden"):window.innerWidth>=766?t>=6?e.classList.add("hidden"):e.classList.remove("hidden"):t>=12?e.classList.add("hidden"):e.classList.remove("hidden")})}function L(){m.length&&m.forEach((e,t)=>{window.innerWidth>=1010?t>=4?e.classList.add("hidden"):e.classList.remove("hidden"):window.innerWidth>=766?t>=3?e.classList.add("hidden"):e.classList.remove("hidden"):t>=4?e.classList.add("hidden"):e.classList.remove("hidden")})}function v(){f(),L(),s&&(s.textContent="Показать всё"),a&&(a.textContent="Показать всё"),d&&d.classList.remove("rotated"),l&&l.classList.remove("rotated"),p=!1,y=!1}function b(){const e=document.createElement("div");return e.className="modal-overlay",e.style.cssText="\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background-color: rgba(255, 255, 255, 0.95);\n    z-index: 9998;\n    opacity: 0;\n    transition: opacity 0.3s ease;\n  ",e.addEventListener("click",h),document.body.appendChild(e),setTimeout(()=>{e.style.opacity="1"},10),e}function g(){const e=document.querySelector(".modal-overlay");e&&(e.style.opacity="0",setTimeout(()=>{e.parentNode&&e.parentNode.removeChild(e)},300))}function h(){const e=document.querySelector(".feedback_container"),t=document.querySelector(".call_container"),n=document.querySelector(".sidebar_container");e&&e.classList.remove("feedback_container--opened"),t&&t.classList.remove("call_container--opened"),n&&n.classList.remove("sidebar_container--opened"),g(),document.removeEventListener("click",_)}function w(e){e&&(h(),b(),e.classList.contains("feedback_container")?e.classList.add("feedback_container--opened"):e.classList.contains("call_container")?e.classList.add("call_container--opened"):e.classList.contains("sidebar_container")&&e.classList.add("sidebar_container--opened"),setTimeout(()=>{document.addEventListener("click",_)},0))}function _(e){const t=document.querySelector(".feedback_container"),n=document.querySelector(".call_container"),o=document.querySelector(".sidebar_container"),i=t&&t.classList.contains("feedback_container--opened"),c=n&&n.classList.contains("call_container--opened"),r=o&&o.classList.contains("sidebar_container--opened");if(!i&&!c&&!r)return void document.removeEventListener("click",_);const s=t&&t.contains(e.target),a=n&&n.contains(e.target),d=o&&o.contains(e.target),l=e.target.classList.contains("modal-overlay"),u=e.target.closest(".button--opened-chat")||e.target.closest(".button--opened-call")||e.target.closest(".burger");(s||a||d||u)&&!l||h()}function S(e){"Escape"===e.key&&h()}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",v):v(),c&&c.addEventListener("click",()=>{p?(f(),s&&(s.textContent="Показать всё"),d&&d.classList.remove("rotated")):(u.forEach(e=>e.classList.remove("hidden")),s&&(s.textContent="Скрыть"),d&&d.classList.add("rotated")),p=!p}),r&&r.addEventListener("click",()=>{y?(L(),a&&(a.textContent="Показать всё"),l&&l.classList.remove("rotated")):(m.forEach(e=>e.classList.remove("hidden")),a&&(a.textContent="Скрыть"),l&&l.classList.add("rotated")),y=!y}),window.addEventListener("resize",function(){p||f(),y||L()}),document.addEventListener("click",function(e){e.target.closest(".button--opened-chat")&&(e.preventDefault(),e.stopPropagation(),w(document.querySelector(".feedback_container"))),e.target.closest(".button--opened-call")&&(e.preventDefault(),e.stopPropagation(),w(document.querySelector(".call_container"))),e.target.closest(".burger")&&(e.preventDefault(),e.stopPropagation(),window.innerWidth<1119&&w(document.querySelector(".sidebar_container"))),e.target.closest(".round_button--close-form")&&(e.stopPropagation(),h()),e.target.closest(".close_menu")&&(e.stopPropagation(),h())}),document.addEventListener("DOMContentLoaded",function(){const e=document.querySelector(".feedback_form"),t=document.querySelector(".call_form");e&&e.addEventListener("submit",function(e){e.preventDefault(),console.log("Форма обратной связи отправлена"),h()}),t&&t.addEventListener("submit",function(e){e.preventDefault(),console.log("Форма звонка отправлена"),h()});const n=document.querySelector(".call_form__phone-input");n&&n.addEventListener("input",function(e){this.value=this.value.replace(/[^\d]/g,"")}),document.addEventListener("keydown",S),document.querySelectorAll(".modal").forEach(e=>{e.addEventListener("click",function(e){e.stopPropagation()})}),function(){const e=document.querySelector(".sidebar");window.innerWidth>=1119?e.style.display="block":e.style.display="none"}(),window.addEventListener("resize",function(){const e=document.querySelector(".sidebar"),t=document.querySelector(".sidebar_container");window.innerWidth>=1119?(e.style.display="block",t&&t.classList.contains("sidebar_container--opened")&&h()):t&&!t.classList.contains("sidebar_container--opened")&&(e.style.display="none")}),console.log("Модальные окна инициализированы"),console.log("Найдено кнопок чата:",document.querySelectorAll(".button--opened-chat").length),console.log("Найдено кнопок звонка:",document.querySelectorAll(".button--opened-call").length),console.log("Найдено кнопок бургер:",document.querySelectorAll(".burger").length)})}catch(W){console.error("Error initializing components:",W)}})})();