import"../assets/scss/style.scss";document.addEventListener("DOMContentLoaded",()=>{try{let l,u={};function e(){return window.innerWidth<=768}function t(){e()?function(){if(!e())return;console.log("Initializing Swipers for mobile");const t={slidesPerView:"auto",spaceBetween:0,pagination:{el:".swiper-pagination",clickable:!0}};["cap_services","repair_container","prices_container"].forEach(e=>{if(document.querySelector("."+e)&&!u[e])try{u[e]=new Swiper("."+e,t),console.log(`Swiper initialized for ${e}`)}catch(t){console.error(`Error initializing Swiper for ${e}:`,t)}})}():(console.log("Destroying Swipers for desktop"),Object.keys(u).forEach(e=>{if(u[e]&&"function"==typeof u[e].destroy)try{u[e].destroy(!0,!0),console.log(`Swiper destroyed for ${e}`)}catch(t){console.error(`Error destroying Swiper for ${e}:`,t)}}),u={})}t(),console.log("Initial Swiper state:",e()?"mobile":"desktop"),window.addEventListener("resize",()=>{clearTimeout(l),l=setTimeout(t,100)});{const _=document.querySelector(".content_button"),S=document.querySelector(".text_second"),k=document.querySelector(".text_third"),E=document.querySelector(".read-more_text"),q=document.querySelector(".information-more_img");let x=!1;function n(){const e=window.innerWidth;e<768?(S.style.display=x?"block":"none",k.style.display="none",S.style.overflow="",S.style.webkitLineClamp="",S.style.webkitBoxOrient=""):e<1119?(S.style.display="-webkit-box",S.style.overflow=x?"visible":"hidden",S.style.webkitBoxOrient="vertical",k.style.display="none",S.style.webkitLineClamp=e>=1119?x?"unset":"1":x?"unset":"2"):(S.style.display="-webkit-box",S.style.overflow=x?"visible":"hidden",S.style.webkitBoxOrient="vertical",S.style.webkitLineClamp=x?"unset":"1",k.style.display=x?"block":"none"),E.textContent=x?"Скрыть":"Читать далее",q.style.transform=x?"rotate(180deg)":"rotate(0deg)"}_.addEventListener("click",()=>{x=!x,n()}),window.addEventListener("resize",()=>{x=!1,n()}),n()}const m=document.getElementById("iconButton"),p=document.getElementById("iconButtonRepair"),y=m.querySelector(".open_icon_text"),f=p?p.querySelector(".open_icon_text"):null,L=document.querySelector(".open_img"),v=document.querySelector(".open_img_repair"),b=document.querySelectorAll(".brands_services"),g=document.querySelectorAll(".repair_services");let h=!1,w=!1;function o(){b.forEach((e,t)=>{window.innerWidth>=1010?t>=8?e.classList.add("hidden"):e.classList.remove("hidden"):window.innerWidth>=766?t>=6?e.classList.add("hidden"):e.classList.remove("hidden"):t>=12?e.classList.add("hidden"):e.classList.remove("hidden")})}function i(){g.length&&g.forEach((e,t)=>{window.innerWidth>=1010?t>=4?e.classList.add("hidden"):e.classList.remove("hidden"):window.innerWidth>=766?t>=3?e.classList.add("hidden"):e.classList.remove("hidden"):t>=4?e.classList.add("hidden"):e.classList.remove("hidden")})}function c(){o(),i(),y&&(y.textContent="Показать всё"),f&&(f.textContent="Показать всё"),L&&L.classList.remove("rotated"),v&&v.classList.remove("rotated"),h=!1,w=!1}function s(){const e=document.querySelector(".feedback_container"),t=document.querySelector(".call_container"),n=document.querySelector(".sidebar_container");e&&e.classList.remove("feedback_container--opened"),t&&t.classList.remove("call_container--opened"),n&&n.classList.remove("sidebar_container--opened"),function(){const e=document.querySelector(".modal-overlay");e&&(e.style.opacity="0",setTimeout(()=>{e.parentNode&&e.parentNode.removeChild(e)},300))}(),document.removeEventListener("click",a)}function r(e){e&&(s(),function(){const e=document.createElement("div");e.className="modal-overlay",e.style.cssText="\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background-color: rgba(255, 255, 255, 0.95);\n    z-index: 9998;\n    opacity: 0;\n    transition: opacity 0.3s ease;\n  ",e.addEventListener("click",s),document.body.appendChild(e),setTimeout(()=>{e.style.opacity="1"},10)}(),e.classList.contains("feedback_container")?e.classList.add("feedback_container--opened"):e.classList.contains("call_container")?e.classList.add("call_container--opened"):e.classList.contains("sidebar_container")&&e.classList.add("sidebar_container--opened"),setTimeout(()=>{document.addEventListener("click",a)},0))}function a(e){const t=document.querySelector(".feedback_container"),n=document.querySelector(".call_container"),o=document.querySelector(".sidebar_container"),i=t&&t.classList.contains("feedback_container--opened"),c=n&&n.classList.contains("call_container--opened"),r=o&&o.classList.contains("sidebar_container--opened");if(!i&&!c&&!r)return void document.removeEventListener("click",a);const d=t&&t.contains(e.target),l=n&&n.contains(e.target),u=o&&o.contains(e.target),m=e.target.classList.contains("modal-overlay"),p=e.target.closest(".button--opened-chat")||e.target.closest(".button--opened-call")||e.target.closest(".burger");(d||l||u||p)&&!m||s()}function d(e){"Escape"===e.key&&s()}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",c):c(),m&&m.addEventListener("click",()=>{h?(o(),y&&(y.textContent="Показать всё"),L&&L.classList.remove("rotated")):(b.forEach(e=>e.classList.remove("hidden")),y&&(y.textContent="Скрыть"),L&&L.classList.add("rotated")),h=!h}),p&&p.addEventListener("click",()=>{w?(i(),f&&(f.textContent="Показать всё"),v&&v.classList.remove("rotated")):(g.forEach(e=>e.classList.remove("hidden")),f&&(f.textContent="Скрыть"),v&&v.classList.add("rotated")),w=!w}),window.addEventListener("resize",function(){h||o(),w||i()}),document.addEventListener("click",function(e){e.target.closest(".button--opened-chat")&&(e.preventDefault(),e.stopPropagation(),r(document.querySelector(".feedback_container"))),e.target.closest(".button--opened-call")&&(e.preventDefault(),e.stopPropagation(),r(document.querySelector(".call_container"))),e.target.closest(".burger")&&(e.preventDefault(),e.stopPropagation(),window.innerWidth<1119&&r(document.querySelector(".sidebar_container"))),e.target.closest(".round_button--close-form")&&(e.stopPropagation(),s()),e.target.closest(".close_menu")&&(e.stopPropagation(),s())}),document.addEventListener("DOMContentLoaded",function(){const e=document.querySelector(".feedback_form"),t=document.querySelector(".call_form");e&&e.addEventListener("submit",function(e){e.preventDefault(),console.log("Форма обратной связи отправлена"),s()}),t&&t.addEventListener("submit",function(e){e.preventDefault(),console.log("Форма звонка отправлена"),s()});const n=document.querySelector(".call_form__phone-input");n&&n.addEventListener("input",function(e){this.value=this.value.replace(/[^\d]/g,"")}),document.addEventListener("keydown",d),document.querySelectorAll(".modal").forEach(e=>{e.addEventListener("click",function(e){e.stopPropagation()})}),function(){const e=document.querySelector(".sidebar");window.innerWidth>=1119?e.style.display="block":e.style.display="none"}(),window.addEventListener("resize",function(){const e=document.querySelector(".sidebar"),t=document.querySelector(".sidebar_container");window.innerWidth>=1119?(e.style.display="block",t&&t.classList.contains("sidebar_container--opened")&&s()):t&&!t.classList.contains("sidebar_container--opened")&&(e.style.display="none")}),console.log("Модальные окна инициализированы"),console.log("Найдено кнопок чата:",document.querySelectorAll(".button--opened-chat").length),console.log("Найдено кнопок звонка:",document.querySelectorAll(".button--opened-call").length),console.log("Найдено кнопок бургер:",document.querySelectorAll(".burger").length)})}catch(C){console.error("Error initializing components:",C)}});